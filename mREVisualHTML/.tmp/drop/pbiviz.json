{"visual":{"name":"MRE","displayName":"MREVis","guid":"mREVisualHTMLA4986341EC2347668ECFB32BD4CD87A1ALL","visualClassName":"Visual","version":"1.2.5","description":"Minimal Reproducible Example","supportUrl":"NA","gitHubUrl":"NA"},"author":{"name":"Caden Hewlett","email":"Visual"},"apiVersion":"3.8.0","style":"style/visual.less","stringResources":{},"capabilities":{"dataRoles":[{"displayName":"Values","kind":"GroupingOrMeasure","name":"dataset"}],"dataViewMappings":[{"scriptResult":{"dataInput":{"table":{"rows":{"select":[{"for":{"in":"dataset"}}],"dataReductionAlgorithm":{"top":{}}}}},"script":{"scriptProviderDefault":"R","scriptOutputType":"html","source":{"objectName":"rcv_script","propertyName":"source"},"provider":{"objectName":"rcv_script","propertyName":"provider"},"scriptSourceDefault":"############### Utility functions ###############\nlibraryRequireInstall = function(packageName, ...)\n{\n  if(!require(packageName, character.only = TRUE)) \n    warning(paste(\"*** The package: '\", packageName, \"' was not installed ***\", sep=\"\"))\n}\n\nlibraryRequireInstall(\"xml2\")\nlibraryRequireInstall(\"htmlwidgets\")\n\ninternalSaveWidget <- function(widget, fname)\n{\n  tempFname = paste(fname, \".tmp\", sep=\"\")\n  htmlwidgets::saveWidget(widget, file = tempFname, selfcontained = FALSE)\n  FlattenHTML(tempFname, fname)\n}\n\nFlattenHTML <- function(fnameIn, fnameOut)\n{\n  # Read and parse HTML file\n  # Embed all js and css files into one unified file\n  \n  if(!file.exists(fnameIn))\n    return(FALSE)\n  \n  dir = dirname(fnameIn)\n  html = read_html(fnameIn, useInternal = TRUE)\n  top = xml_root(html)\n  \n  # extract all <script> tags with src value\n  srcNode=xml_find_all(top, '//script[@src]')\n  for (node in srcNode)\n  {\n    b = xml_attrs(node)\n    fname = file.path(dir, b['src'])\n    alternateSrc = FindSrcReplacement(fname)\n    if (!is.null(alternateSrc))\n    {\n      s = alternateSrc\n      names(s) = 'src'\n      newNode = xml_new_root(\"script\")\n      xml_set_attrs(newNode, s)\n      xml_replace(node, newNode)\n    }else{\n      str=ReadFileForEmbedding(fname);\n      if (!is.null(str))\n      {      \n        newNode = xml_new_root(\"script\",str)\n        xml_set_attrs( newNode, c( type = \"text/javascript\") )\n        xml_replace(node, newNode)\n      }\n    }\n  }\n  \n  # extract all <link> tags with src value\n  linkNode=xml_find_all(top, '//link[@href]')\n  for (node in linkNode)\n  {\n    b = xml_attrs(node)\n    fname = file.path(dir, b['href'])\n    str = ReadFileForEmbedding(fname, FALSE);\n    if (!is.null(str))\n    {\n      newNode = xml_new_root(\"style\", str)\n      xml_replace(node, newNode)\n    }\n  }\n  \n  write_xml(html, file = fnameOut)\n  return(TRUE)\n}\n\nReadFileForEmbedding <- function(fname, addCdata = TRUE)\n{\n  data = ReadFullFile(fname)\n  if (is.null(data))\n    return(NULL)\n\n  str = paste(data, collapse ='\\n')\n  if (addCdata) {\n    str = paste(cbind('// <![CDATA[', str,'// ]]>'), collapse ='\\n')\n  }\n  return(str)\n}\n\nReadFullFile <- function(fname)\n{\n  if(!file.exists(fname))\n    return(NULL)\n  \n  con = file(fname, open = \"r\")\n  data = readLines(con)\n  close(con)\n  return(data)\n}\n\nFindSrcReplacement <- function(str)\n{\n  # finds reference to 'plotly' js and replaces with a version from CDN\n  # This allows the HTML to be smaller, since this script is not fully embedded in it\n  str <- iconv(str, to=\"UTF-8\")\n  pattern = \"plotly-(\\\\w.+)/plotly-latest.min.js\"\n  match1=regexpr(pattern, str)\n  attr(match1, 'useBytes') <- FALSE\n  strMatch=regmatches(str, match1, invert = FALSE)\n  if (length(strMatch) == 0) return(NULL)\n  \n  pattern2 = \"-(\\\\d.+)/\"\n  match2 = regexpr(pattern2, strMatch[1])\n  attr(match2, 'useBytes') <- FALSE\n  strmatch = regmatches(strMatch[1], match2)\n  if (length(strmatch) == 0) return(NULL)\n  \n  # CDN url is https://cdn.plot.ly/plotly-<Version>.js\n  # This matches the specific version used in the plotly package used.\n  verstr = substr(strmatch, 2, nchar(strmatch)-1)\n  str = paste('https://cdn.plot.ly/plotly-', verstr,'.min.js', sep='')\n  return(str)\n}\n\nReadFullFileReplaceString <- function(fnameIn, fnameOut, sourceString,targetString) {\n  # Replaces texts in file\n  # This makes it possible to replace e.g. paddings in the generated html widget code\n  if(!file.exists(fnameIn))\n    return(NULL)\n  tx  <- readLines(fnameIn,encoding = \"UTF-8\")\n  tx2  <- gsub(pattern = sourceString, replace = targetString, x = tx)\n  writeLines(tx2, con = fnameOut)\n}\n#################################################\n\r\n\r\n############### Library Declarations ###############\r\nlibraryRequireInstall(\"ggplot2\");\r\nlibraryRequireInstall(\"plotly\")\r\n####################################################\r\n\r\n# static list of Attribute names, original workaround\r\nnames = c(\"Activity and Mobility\", \"Care of the Surgical Patient\", \r\n          \"Dressing and Wound Care\", \"Elimination\",\r\n          \"Fluid Balance\", \"Home Care\", \"Hygiene\", \"Infection Control\", \r\n          \"Medications\", \"Nutrition\", \"Oxygenation\", \"Safety and Comfort\", \r\n          \"Special Procedures\", \"Support through Healthcare System\", \r\n          \"Vital Signs And Physical Assessment\")\r\n\r\n# ################### Actual code ####################\r\n\r\n# store the pre-translation row count\r\nstoRow = nrow(dataset)\r\n\r\n# determine the range of slider columns\r\nslider_selections = unique(na.omit(dataset[3:(ncol(dataset) - 3)]))\r\n\r\n# determine the range of min columns\r\nslider_min = slider_selections[0:(length(slider_selections) / 2)]\r\n\r\n# determine the range of max columns\r\nslider_max = slider_selections[!(slider_selections %in% slider_min)]\r\n\r\n# join into list, similar to python's zip()\r\nx = mapply(list, slider_max, slider_min, SIMPLIFY = TRUE)\r\n\r\n# for each min/max pair\r\nfor (i in 1:ncol(x)) {\r\n  # get max\r\n  max = x[[1, i]]\r\n  # get min\r\n  min = x[[2, i]]\r\n  \r\n  # if the sliders are in range\r\n  if (!(max - min) == 9) {\r\n    # add the desired row to the bottom of the DataFrame\r\n    dataset[nrow(dataset) + 1,] =\r\n      c(names[i],\r\n        dataset$Score[i],\r\n        max,\r\n        min,\r\n        dataset$`Importance Level`[i],\r\n        dataset$whyDidYouSelectThatSkillLevelPleaseSelectAllThatApply[i],\r\n        dataset$isThereAnythingThatYouWouldLikeToShareAboutThisSkill[i],\r\n        rep(NA, times = ncol(dataset) - 7) )\r\n  }\r\n}\r\n\r\n# rename the columns according to the data we really want\r\ncolnames(dataset) = c(\"Attribute\", \"Score\", \"Max\", \"Min\", \"toolTip_1\", \r\n                      \"toolTip_2\", \"toolTip_3\", \"Label\")\r\n\r\n# Define Tab and Enter constants for text spacing\r\nBUFFER = (\"       \")\r\nENTER = \"\\n\"\r\n\r\n# Define Label Column for Tooltip. Uses HTML for Formatting\r\ndataset$Label =\r\n  paste(\r\n    # Title 1\r\n    paste(\"<span style='color:#445E80;'><b>\",\r\n          paste(BUFFER, (\"How important is this to me?\")),\r\n          \"</b></span>\", \"\\n\", sep = \"\"),\r\n    # White Space\r\n    ENTER,\r\n    # Data Point 1 \r\n    paste(\"<span style='color:#808080;font-size:13px'><b>\",\r\n          paste(BUFFER, BUFFER, BUFFER, as.character(dataset$toolTip_1)),\r\n          \"\\n</b></span>\", sep = \"\"),\r\n    # White Space\r\n    ENTER,\r\n    # Title 2\r\n    paste(\"<span style='color:#445E80'><b>\",\r\n          paste(\"   \", \"Why did you select that skill level?\"),\r\n          \"</b></span>\", \"\\n\", sep = \"\"),\r\n    # White Space\r\n    ENTER,\r\n    # Data Point 2\r\n    paste(dataset$toolTip_3, \"\\n\", sep = \"\"),\r\n    # White Space\r\n    ENTER,\r\n    # Title 3\r\n    paste(\"<span style='color:#445E80 '><b>\",\r\n          paste(BUFFER, \"   \", (\"Additional Information\")),\r\n          \"</b></span>\", ENTER, sep = \"\"),\r\n    # White Space\r\n    ENTER,\r\n    \r\n    # Manual Width Setting White Space \r\n    paste(paste(rep(\"\", times = 70), collapse = \" \"), \"\\n\", sep = \"\"),\r\n    sep = \"\")\r\n\r\n# Reshape the dataframe to what we want\r\ndataset = dataset[\r\n  (stoRow + 1):nrow(dataset), # get only our injected columns\r\n  1:length(colnames(dataset)[!is.na(colnames(dataset))]) ] # and desired cols\r\n\r\ng = ggplot(data = dataset, aes(x = Attribute, y = Score)) \r\ng = g + geom_bar(stat = \"identity\")\r\n\r\n\r\n\r\n# ############# Create and save widget ###############\r\np = (ggplotly(g) %>%\r\n       # Define tooltip parameters\r\n       style(hoverlabel = list(bgcolor = \"white\",\r\n                               font = list(color = '#808080',\r\n                                           family = \"Segoe UI\",\r\n                                           size = 9.5),\r\n                               align = 'left')) %>%\r\n       # Add Tooltip with customizations\r\n       style(text = as.character(dataset$Label), traces = 1) %>%\r\n       # Remove unnecessary plotly buttons\r\n       config(displaylogo = FALSE,\r\n              modeBarButtonsToRemove = c('sendDataToCloud', 'autoScale2d',\r\n                                         'resetScale2d', 'toggleSpikelines',\r\n                                         'hoverClosestCartesian', \r\n                                         'hoverCompareCartesian',\r\n                                         'pan2d', 'lasso2d', 'toImage')))\r\n                                         \r\n############# Create and save widget ###############\r\n# p = (ggplotly(g) )\r\n\r\ninternalSaveWidget(p, 'out.html');\r\n####################################################\r\n\r\n################ Reduce paddings ###################\r\nReadFullFileReplaceString('out.html', 'out.html', ',\"padding\":[0-9]*,', ',\"padding\":0,')\r\n####################################################\r\n"}}}],"objects":{"rcv_script":{"properties":{"provider":{"type":{"text":true}},"source":{"type":{"scripting":{"source":true}}}}}},"suppressDefaultTitle":true},"dependencies":{"cranPackages":[{"name":"ggplot2","displayName":"GG Plot 2","url":"https://cran.r-project.org/web/packages/ggplot2/index.html"},{"name":"plotly","displayName":"Plotly","url":"https://cran.r-project.org/web/packages/plotly/index.html"},{"name":"htmlwidgets","displayName":"HTML Widgets","url":"https://cran.r-project.org/web/packages/htmlwidgets/index.html"},{"name":"xml2","displayName":"xml2","url":"https://cran.r-project.org/web/packages/xml2/index.html"}]},"content":{"js":"var mREVisualHTMLA4986341EC2347668ECFB32BD4CD87A1ALL;(()=>{\"use strict\";var e={830:(e,t,r)=>{r.d(t,{Kq:()=>o,ME:()=>l,Tx:()=>i});var s=r(738);let n=0;function i(){n=0}function o(e,t){let r=[];if(!e||!e.hasChildNodes())return;let s=e.children;for(let e=0;e<s.length;e++){let n;n=\"script\"===s.item(e).nodeName.toLowerCase()?a(s.item(e)):s.item(e).cloneNode(!0),t.appendChild(n),r.push(n)}return r}function a(e){let t=document.createElement(\"script\"),r=e.attributes;for(let e=0;e<r.length;e++)t.setAttribute(r[e].name,r[e].textContent),\"src\"===r[e].name.toLowerCase()&&(n++,t.onload=()=>{n--});return t.innerHTML=e.innerHTML,t}function l(){let e=s.setInterval((()=>{0===n&&(s.clearInterval(e),s.hasOwnProperty(\"HTMLWidgets\")&&s.HTMLWidgets.staticRender&&s.HTMLWidgets.staticRender())}),100)}},539:(e,t,r)=>{r.d(t,{J:()=>n});var s=r(554).U;class n extends s{constructor(){super(...arguments),this.rcv_script=new i}}class i{}},699:(e,t,r)=>{r.d(t,{u:()=>l});var s,n=r(539),i=r(830),o=r(738);!function(e){e[e.Data=2]=\"Data\",e[e.Resize=4]=\"Resize\",e[e.ViewMode=8]=\"ViewMode\",e[e.Style=16]=\"Style\",e[e.ResizeEnd=32]=\"ResizeEnd\",e[e.All=62]=\"All\"}(s||(s={}));const a=[s.Resize,s.ResizeEnd,s.Resize+s.ResizeEnd];class l{constructor(e){e&&e.element&&(this.rootElement=e.element),this.headNodes=[],this.bodyNodes=[]}update(e){if(!(e&&e.type&&e.viewport&&e.dataViews&&0!==e.dataViews.length&&e.dataViews[0]))return;const t=e.dataViews[0];this.settings=l.parseSettings(t);let r=null;t.scriptResult&&t.scriptResult.payloadBase64&&(r=t.scriptResult.payloadBase64),-1===a.indexOf(e.type)?r&&this.injectCodeFromPayload(r):this.onResizing(e.viewport)}onResizing(e){}injectCodeFromPayload(e){if((0,i.Tx)(),!e)return;let t=document.createElement(\"html\");try{t.innerHTML=o.atob(e)}catch(e){return}if(0===this.headNodes.length){for(;this.headNodes.length>0;){let e=this.headNodes.pop();document.head.removeChild(e)}let e=t.getElementsByTagName(\"head\");if(e&&e.length>0){let t=e[0];this.headNodes=(0,i.Kq)(t,document.head)}}for(;this.bodyNodes.length>0;){let e=this.bodyNodes.pop();this.rootElement.removeChild(e)}let r=t.getElementsByTagName(\"body\");if(r&&r.length>0){let e=r[0];this.bodyNodes=(0,i.Kq)(e,this.rootElement)}(0,i.ME)()}static parseSettings(e){return n.J.parse(e)}enumerateObjectInstances(e){return n.J.enumerateObjectInstances(this.settings||n.J.getDefault(),e)}}},567:(e,t,r)=>{function s(e,t,r){if(!e)return r;let s=e[t];return void 0===s?r:s}r.d(t,{N:()=>s})},982:(e,t,r)=>{r.d(t,{d9:()=>n});var s=r(567);function n(e,t,r){const n=function(e,t,r){return e?s.N(e[t.objectName],t.propertyName,r):r}(e,t,r);return n&&n.solid?n.solid.color:null==n||\"object\"==typeof n&&!n.solid?r:n}},554:(e,t,r)=>{r.d(t,{U:()=>n});var s=r(982);class n{static getDefault(){return new this}static createPropertyIdentifier(e,t){return{objectName:e,propertyName:t}}static parse(e){let t,r=this.getDefault();if(!e||!e.metadata||!e.metadata.objects)return r;t=r.getProperties();for(let n in t)for(let i in t[n]){const o=r[n][i];r[n][i]=s.d9(e.metadata.objects,t[n][i],o)}return r}static isPropertyEnumerable(e){return!n.InnumerablePropertyPrefix.test(e)}static enumerateObjectInstances(e,t){let r=e&&e[t.objectName];if(!r)return[];let s={objectName:t.objectName,selector:null,properties:{}};for(let e in r)r.hasOwnProperty(e)&&(s.properties[e]=r[e]);return{instances:[s]}}getProperties(){let e={};return Object.keys(this).forEach((t=>{if(n.isPropertyEnumerable(t)){let r=Object.keys(this[t]);e[t]={},r.forEach((r=>{n.isPropertyEnumerable(t)&&(e[t][r]=n.createPropertyIdentifier(t,r))}))}})),e}}n.InnumerablePropertyPrefix=/^_/},738:e=>{e.exports=Function(\"return this\")()}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var s={};(()=>{r.r(s),r.d(s,{default:()=>i});var e=r(699),t=r(738).powerbi,n={name:\"mREVisualHTMLA4986341EC2347668ECFB32BD4CD87A1ALL\",displayName:\"MREVis\",class:\"Visual\",apiVersion:\"3.8.0\",create:t=>{if(e.u)return new e.u(t);throw\"Visual instance not found\"},createModalDialog:(e,t,r)=>{const s=globalThis.dialogRegistry;e in s&&new s[e](t,r)},custom:!0};void 0!==t&&(t.visuals=t.visuals||{},t.visuals.plugins=t.visuals.plugins||{},t.visuals.plugins.mREVisualHTMLA4986341EC2347668ECFB32BD4CD87A1ALL=n);const i=n})(),mREVisualHTMLA4986341EC2347668ECFB32BD4CD87A1ALL=s})();","css":"","iconBase64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpBOEJGMzkxN0NBRDNFMDExQTcxQ0JFODI3ODBCQUE5RSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3NEY1QjA1NUQ0OTAxMUUwQTgxREI2NjMxMkNEMUNEMyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3NEY1QjA1NEQ0OTAxMUUwQTgxREI2NjMxMkNEMUNEMyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5Mjk5RDU1ODBGRDRFMDExQTcxQ0JFODI3ODBCQUE5RSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBOEJGMzkxN0NBRDNFMDExQTcxQ0JFODI3ODBCQUE5RSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpDoNX0AAAI3SURBVHjarJRLSFVRFIY9t7SiRDGLoEEPCRJRaCSYkxCiFCXCF+LIMExQLkilgumgwkbdBuWDRC2EomhURCOjgagkXEgKLUKhidobM6H0+i34rxyPnuvEA5/rXPda/1l7739vJxKJxG3ls93+hEKhTILxJhgMftmsiPxdhHw4CfepeR8dCyjWwwB0kZy3iVgCoQ2ewnmXxhrBD7Cgr/ZQVA17fDRPw2UYhzK6G99IsBse6/0QNME+H8FT4EA/YiPqOgA1q4IMzBNuw6iKjkCpj+Av+AdnEEmD3bxfhzvuDk30HaEaLsEkXCO53rN+Bwg5qsvTuj/TjGYtx9nINhRmEx7AYWiFW7AXOuEcbPOUvIZ2mnrl+PkQUbNEh4QHNKUSDdsSBWEOlmxTEfvs26FL9Khe211if6Acgee+xo7xzMgBxfq9qPe3fgWBGN2lEnqtG9nExM7CV3jp3bDos2bKJB0nHFRxAxRpA/5CIXyHh5ABv6GZqd9dJ6iz2SjbxMMypGhJFtTlNzu3kK7xgDxpove8U66FK2A+s6nul5gVVMEL+Ak7lG/T+g9JcIOGar2CRUoogxMwpP/bLTJMB9bRhDbkk5bBUU0y3ES0xS04CBfN9RSHiY90vJK0BHaSzG9h2eejS3RJeVfdtrGzuGyd8CX7Yq6ExuCH63jaVMPkFOv6OibB6DKs2+VEQp+WYBoqERn2sVWWRNN0YurIfeL14U6YkpkLYCSG6e0yqdCxvKBLIm5FgAEAV0nKuwMYRUsAAAAASUVORK5CYII="},"visualEntryPoint":"","toolsVersion":null}